{% load static %}
<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="{% static 'css/login.css' %}" />
    <link rel="stylesheet" href="{% static 'css/fondo.css' %}" />
    <script
      src="https://kit.fontawesome.com/c9e7873447.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="logo-box">
      <img
        class="logo"
        src="{% static 'img/logo-live-technology.png' %}"
        alt="logo de la empresa"
      />
    </div>

    <svg
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      x="0px"
      y="0px"
      width="100%"
      height="100%"
      viewBox="0 0 1600 900"
      preserveAspectRatio="xMidYMax slice"
    >
      <defs>
        <linearGradient id="bg">
          <stop
            offset="0%"
            style="stop-color: rgba(130, 158, 249, 0.06)"
          ></stop>
          <stop offset="50%" style="stop-color: rgba(76, 190, 255, 0.6)"></stop>
          <stop
            offset="100%"
            style="stop-color: rgba(115, 209, 72, 0.2)"
          ></stop>
        </linearGradient>
        <path
          id="wave"
          fill="url(#bg)"
          d="M-363.852,502.589c0,0,236.988-41.997,505.475,0 s371.981,38.998,575.971,0s293.985-39.278,505.474,5.859s493.475,48.368,716.963-4.995v560.106H-363.852V502.589z"
        />
      </defs>
      <g>
        <use xlink:href="#wave" opacity=".3">
          <animateTransform
            attributeName="transform"
            attributeType="XML"
            type="translate"
            dur="10s"
            calcMode="spline"
            values="270 230; -334 180; 270 230"
            keyTimes="0; .5; 1"
            keySplines="0.42, 0, 0.58, 1.0;0.42, 0, 0.58, 1.0"
            repeatCount="indefinite"
          />
        </use>
        <use xlink:href="#wave" opacity=".6">
          <animateTransform
            attributeName="transform"
            attributeType="XML"
            type="translate"
            dur="8s"
            calcMode="spline"
            values="-270 230;243 220;-270 230"
            keyTimes="0; .6; 1"
            keySplines="0.42, 0, 0.58, 1.0;0.42, 0, 0.58, 1.0"
            repeatCount="indefinite"
          />
        </use>
        <use xlink:href="#wave" opacty=".9">
          <animateTransform
            attributeName="transform"
            attributeType="XML"
            type="translate"
            dur="6s"
            calcMode="spline"
            values="0 230;-140 200;0 230"
            keyTimes="0; .4; 1"
            keySplines="0.42, 0, 0.58, 1.0;0.42, 0, 0.58, 1.0"
            repeatCount="indefinite"
          />
        </use>
      </g>
    </svg>

    <section>
      <div class="contenedor">
        <div class="formulario">
          <form action="{% url 'login' %}" method="post">
            {% csrf_token %}
            <h2>Iniciar Sesión</h2>

            <div class="input-content">
              <i class="fa-solid fa-envelope"></i>
              <input
                type="text"
                id="username"
                name="username"
                placeholder=""
                required
              />
              <label for="#">Email o usuario</label>
            </div>

            <div class="input-content">
              <i class="fa-solid fa-lock"></i>
              <input
                type="password"
                id="password"
                name="password"
                placeholder=""
              />
              <label for="#">Contraseña</label>
            </div>

            <div class="olvidar">
              <label for="#">
                <input type="checkbox" />Recordar
                <a href="{% url 'recuperacion' %}">¿Olvidaste la contraseña?</a>
              </label>
            </div>

            <button type="submit">Acceder</button>
          </form>
          <div class="registrar">
            <p>No tengo cuenta <a href="{% url 'registro' %}">Crear una</a></p>
          </div>
        </div>
      </div>
    </section>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Función para mostrar la alerta emergente
        function mostrarAlerta(mensaje) {
          Swal.fire({
            icon: 'error',
            title: 'Error',
            text: mensaje,
            timer: 3000,
            showConfirmButton: false
          });
        }

        // Obtener el mensaje de error desde el contexto de Django
        var mensajes = [];
        {% if messages %}
          {% for message in messages %}
            mensajes.push("{{ message }}");
          {% endfor %}
        {% endif %}

        mensajes.forEach(function (mensaje) {
          mostrarAlerta(mensaje);
        });
      });
    </script>
  </body>
</html>
